# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–µ—Ä–∞

## üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –º–æ–¥—É–ª–µ–π
**–ü—Ä–æ–±–ª–µ–º–∞:** `ModuleNotFoundError: No module named 'app'`

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∏–º–ø–æ—Ä—Ç–∞ –≤ `document_parser.py`

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω fallback –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø—É—Ç—è–º–∏

---

### 2. –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü —Å–æ —Å–ø–∏—Å–∫–∞–º–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–∞—Ä—Å–µ—Ä –ø—ã—Ç–∞–µ—Ç—Å—è –ø–∞—Ä—Å–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ —Å–ø–∏—Å–∫–∞–º–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—å–∏

**–ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö URL:**
- `https://3dtoday.ru/questions` - —Å–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤
- `https://3dtoday.ru/blogs` - —Å–ø–∏—Å–æ–∫ –±–ª–æ–≥–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (`_detect_page_type`)
- –°—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ —Å–ø–∏—Å–∫–∞–º–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∏ –æ—Ç–∫–ª–æ–Ω—è—é—Ç—Å—è
- –î–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ —Å–æ–∑–¥–∞–Ω `QuestionsParser`

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–¢–∏–ø—ã —Å—Ç—Ä–∞–Ω–∏—Ü:**
- `questions_list` - —Å–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ (`/questions`)
- `question` - –æ—Ç–¥–µ–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å (`/questions/12345`)
- `blogs_list` - —Å–ø–∏—Å–æ–∫ –±–ª–æ–≥–æ–≤ (`/blogs`)
- `article` - –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç—å—è (`/blogs/article-name`)

**–õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:**
```python
if path == "/questions" or path.endswith("/questions"):
    return "questions_list"

if "/questions/" in path and parts[1]:  # –µ—Å—Ç—å ID –ø–æ—Å–ª–µ /questions/
    return "question"
```

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–∏—Å–∫–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤

**–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
- –°—Ç—Ä–∞–Ω–∏—Ü—ã —Å–æ —Å–ø–∏—Å–∫–∞–º–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –∫–∞–∫ `questions_list`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–µ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å URL –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç —Ç–∞–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "decision": "reject",
  "reason": "–≠—Ç–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ —Å–ø–∏—Å–∫–æ–º –≤–æ–ø—Ä–æ—Å–æ–≤, –∞ –Ω–µ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç—å—è. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ URL –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ KB.",
  "recommendations": ["–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ URL –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞ –∏–∑ —Å–ø–∏—Å–∫–∞"]
}
```

### 3. –ü–∞—Ä—Å–µ—Ä –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤

**–°–æ–∑–¥–∞–Ω `QuestionsParser`:**
- –ü–∞—Ä—Å–∏—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã (`/questions/12345`)
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç—ã
- –§–æ—Ä–º–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ: "–í–æ–ø—Ä–æ—Å: ... –û—Ç–≤–µ—Ç—ã: ..."

**–ò–∑–≤–ª–µ–∫–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –≤–æ–ø—Ä–æ—Å–∞
- –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
- –û—Ç–≤–µ—Ç—ã (—Ç–µ–∫—Å—Ç, –∞–≤—Ç–æ—Ä, –¥–∞—Ç–∞)
- –ê–≤—Ç–æ—Ä –≤–æ–ø—Ä–æ—Å–∞
- –î–∞—Ç–∞ –≤–æ–ø—Ä–æ—Å–∞
- –¢–µ–≥–∏

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –°–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤
```python
url = "https://3dtoday.ru/questions"
# –†–µ–∑—É–ª—å—Ç–∞—Ç: questions_list, –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä–µ–º
```

### –¢–µ—Å—Ç 2: –û—Ç–¥–µ–ª—å–Ω—ã–π –≤–æ–ø—Ä–æ—Å
```python
url = "https://3dtoday.ru/questions/12345"
# –†–µ–∑—É–ª—å—Ç–∞—Ç: question, –ø–∞—Ä—Å–∏—Ç—Å—è —á–µ—Ä–µ–∑ QuestionsParser
```

### –¢–µ—Å—Ç 3: –°–ø–∏—Å–æ–∫ –±–ª–æ–≥–æ–≤
```python
url = "https://3dtoday.ru/blogs"
# –†–µ–∑—É–ª—å—Ç–∞—Ç: blogs_list, –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ
```

### –¢–µ—Å—Ç 4: –û—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç–∞—Ç—å—è
```python
url = "https://3dtoday.ru/blogs/article-name"
# –†–µ–∑—É–ª—å—Ç–∞—Ç: article, –ø–∞—Ä—Å–∏—Ç—Å—è —á–µ—Ä–µ–∑ ArticleParser
```

---

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ URL –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ KB:

1. **–û—Ç–¥–µ–ª—å–Ω—ã–µ —Å—Ç–∞—Ç—å–∏:**
   - `https://3dtoday.ru/blogs/article-name`
   - `https://3dtoday.ru/.../article`

2. **–û—Ç–¥–µ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã:**
   - `https://3dtoday.ru/questions/12345`
   - `https://3dtoday.ru/questions/question-slug`

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ URL (–±—É–¥—É—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã):

1. **–°–ø–∏—Å–∫–∏:**
   - `https://3dtoday.ru/questions` ‚ùå
   - `https://3dtoday.ru/blogs` ‚ùå

2. **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:**
   - `https://3dtoday.ru/` ‚ùå

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–º–ø–æ—Ä—Ç—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:

**–ë—ã–ª–æ:**
```python
from app.services.article_parser import ArticleParser
```

**–°—Ç–∞–ª–æ:**
```python
try:
    from backend.app.services.article_parser import ArticleParser
except ImportError:
    from app.services.article_parser import ArticleParser
```

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

```python
async def _detect_page_type(self, url: str) -> str:
    parsed = urlparse(url.lower())
    path = parsed.path.rstrip('/')
    
    if path == "/questions":
        return "questions_list"
    
    if "/questions/" in path:
        parts = path.split("/questions/")
        if len(parts) > 1 and parts[1]:
            return "question"
    
    return "article"
```

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –ø–∞—Ä—Å–µ—Ä:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚úÖ –û—Ç–∫–ª–æ–Ω—è–µ—Ç —Å–ø–∏—Å–∫–∏ –≤–æ–ø—Ä–æ—Å–æ–≤/–±–ª–æ–≥–æ–≤
- ‚úÖ –ü–∞—Ä—Å–∏—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ QuestionsParser
- ‚úÖ –ü–∞—Ä—Å–∏—Ç —Å—Ç–∞—Ç—å–∏ —á–µ—Ä–µ–∑ ArticleParser
- ‚úÖ –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã —Å—Ç—Ä–∞–Ω–∏—Ü

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- `backend/app/services/document_parser.py` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–µ—Ä
- `backend/app/services/questions_parser.py` - –ø–∞—Ä—Å–µ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤
- `backend/app/services/article_parser.py` - –ø–∞—Ä—Å–µ—Ä —Å—Ç–∞—Ç–µ–π
- `docs/TROUBLESHOOTING.md` - —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º


