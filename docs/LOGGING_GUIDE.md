# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—é

## üìã –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å –∑–∞–ø–∏—Å—å—é –≤ —Ñ–∞–π–ª—ã.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–≥–æ–≤

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `logs/`:

```
logs/
‚îú‚îÄ‚îÄ api.log          # –õ–æ–≥–∏ FastAPI endpoints
‚îú‚îÄ‚îÄ llm.log          # –õ–æ–≥–∏ LLM –∫–ª–∏–µ–Ω—Ç–∞ (Ollama, OpenAI)
‚îú‚îÄ‚îÄ parser.log       # –õ–æ–≥–∏ –ø–∞—Ä—Å–µ—Ä–æ–≤ (HTML, PDF, JSON)
‚îú‚îÄ‚îÄ librarian.log    # –õ–æ–≥–∏ –∞–≥–µ–Ω—Ç–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—è
‚îî‚îÄ‚îÄ vector_db.log    # –õ–æ–≥–∏ —Ä–∞–±–æ—Ç—ã —Å Qdrant
```

### –†–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤

- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 10 MB
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π: 5
- –ö–æ–¥–∏—Ä–æ–≤–∫–∞: UTF-8

---

## üîç –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

### –í—Å–µ –ª–æ–≥–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 50 —Å—Ç—Ä–æ–∫ –≤—Å–µ—Ö –ª–æ–≥–æ–≤
tail -50 logs/*.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫ –≤–æ –≤—Å–µ—Ö –ª–æ–≥–∞—Ö
grep -r "ERROR" logs/

# –ü–æ–∏—Å–∫ —Ç–∞–π–º–∞—É—Ç–æ–≤
grep -r "timeout\|Timeout\|TIMEOUT" logs/
```

### –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

```bash
# –õ–æ–≥–∏ API
tail -f logs/api.log

# –õ–æ–≥–∏ LLM
tail -f logs/llm.log

# –õ–æ–≥–∏ –ø–∞—Ä—Å–µ—Ä–∞
tail -f logs/parser.log

# –õ–æ–≥–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—è
tail -f logs/librarian.log
```

---

## üìä –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö –ª–æ–≥–∏

### 1. –û—à–∏–±–∫–∏ Ollama (404 Not Found)

**–õ–æ–≥:**
```
‚ùå HTTP –æ—à–∏–±–∫–∞ Ollama: 404 - {"error":"model 'llama3.1:70b' not found"}
```

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏: `curl http://localhost:11434/api/tags`
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –º–æ–¥–µ–ª—å: `ollama pull llama3.1:8b`
- –û–±–Ω–æ–≤–∏—Ç–µ `OLLAMA_MODEL` –≤ `config.env`

---

### 2. –¢–∞–π–º–∞—É—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞

**–õ–æ–≥:**
```
‚ö†Ô∏è –¢–∞–π–º–∞—É—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞: https://example.com (timeout=30 —Å–µ–∫)
```

**–†–µ—à–µ–Ω–∏–µ:**
- –£–≤–µ–ª–∏—á—å—Ç–µ `DOCUMENT_PARSER_TIMEOUT` –≤ `config.env`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∞–π—Ç–∞

---

### 3. –û—à–∏–±–∫–∏ Qdrant

**–õ–æ–≥:**
```
‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Qdrant: Connection refused
```

**–†–µ—à–µ–Ω–∏–µ:**
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ Qdrant: `./scripts/start_qdrant.sh`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç: `docker ps | grep qdrant`

---

### 4. –û—à–∏–±–∫–∏ LLM –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

**–õ–æ–≥:**
```
‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Ollama: Client error '404 Not Found'
```

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ Ollama: `curl http://localhost:11434/api/tags`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –º–æ–¥–µ–ª—å –≤ `config.env`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ fallback –Ω–∞ `/api/generate` –µ—Å–ª–∏ `/api/chat` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

---

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Ä–æ–≤–Ω—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

–í `config.env`:

```env
LOG_LEVEL=DEBUG  # DEBUG, INFO, WARNING, ERROR
LOG_DIR=logs     # –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è –ª–æ–≥–æ–≤
```

---

## üìù –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤

```
2025-12-06 21:36:10,123 - llm - ERROR - [llm_client.py:164] - ‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Ollama: Client error '404 Not Found'
```

–§–æ—Ä–º–∞—Ç:
- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
- –ò–º—è –ª–æ–≥–≥–µ—Ä–∞ (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç)
- –£—Ä–æ–≤–µ–Ω—å (DEBUG, INFO, WARNING, ERROR)
- –§–∞–π–ª –∏ —Å—Ç—Ä–æ–∫–∞
- –°–æ–æ–±—â–µ–Ω–∏–µ

---

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –ò–º–ø–æ—Ä—Ç –ª–æ–≥–≥–µ—Ä–∞

```python
from app.utils.logger_config import get_llm_logger

logger = get_llm_logger()
logger.info("–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ")
logger.warning("–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ")
logger.error("–û—à–∏–±–∫–∞", exc_info=True)  # –° traceback
logger.debug("–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è")
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

```python
logger.info(f"üì• –ü–∞—Ä—Å–∏–Ω–≥ –¥–æ–∫—É–º–µ–Ω—Ç–∞: {url}")
logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ {url}: {e}", exc_info=True)
logger.warning(f"‚ö†Ô∏è –¢–∞–π–º–∞—É—Ç: {elapsed_time:.2f} —Å–µ–∫ > {timeout} —Å–µ–∫")
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- `backend/app/utils/logger_config.py` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- `config.env` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Ä–æ–≤–Ω—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- `docs/TIMEOUT_ANALYSIS.md` - –∞–Ω–∞–ª–∏–∑ —Ç–∞–π–º–∞—É—Ç–æ–≤

