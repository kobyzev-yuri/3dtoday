# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —á–µ—Ä–µ–∑ MCP –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

## üéØ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ MCP

–£ –Ω–∞—Å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –µ—Å—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ MCP –∞–≥–µ–Ω—Ç–æ–≤! –ü–∞—Ä—Å–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏–∑ —Å—Ç–∞—Ç–µ–π –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.

---

## üìã MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞

### `parse_article_from_url()`

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `backend/app/mcp/kb_mcp_server.py`

**–§—É–Ω–∫—Ü–∏—è:**
- –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç–∞—Ç—å–∏ –ø–æ URL —Å 3dtoday.ru
- –ê–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ –∞–≥–µ–Ω—Ç–∞-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—è
- –°–æ–∑–¥–∞–Ω–∏–µ –∫—Ä–∞—Ç–∫–æ–≥–æ –∏–∑–ª–æ–∂–µ–Ω–∏—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ MCP:**
```python
from mcp import ClientSession, StdioServerParameters
from mcp.client.stdio import stdio_client

server_params = StdioServerParameters(
    command="python3",
    args=["backend/app/mcp/kb_mcp_server.py"]
)

async with stdio_client(server_params) as (read, write):
    async with ClientSession(read, write) as session:
        await session.initialize()
        
        # –í—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
        result = await session.call_tool(
            "parse_article_from_url",
            {"url": "https://3dtoday.ru/..."}
        )
```

---

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ FastAPI

FastAPI endpoint `/api/kb/articles/parse` –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç:

```python
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤ (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
from services.article_parser import ArticleParser
from agents.kb_librarian import KBLibrarianAgent

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ MCP (–±–æ–ª–µ–µ —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ)
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MCP –∫–ª–∏–µ–Ω—Ç –¥–ª—è –≤—ã–∑–æ–≤–∞ parse_article_from_url()
```

---

## üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ MCP –ø–æ–¥—Ö–æ–¥–∞

1. **–î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ—Å—Ç—å** - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —á–µ—Ä–µ–∑ `@mcp.tool()`
2. **–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ** - –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ KB —á–µ—Ä–µ–∑ MCP
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** - LangGraph –∞–≥–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
4. **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

---

## üìö –°—Ç—Ä—É–∫—Ç—É—Ä–∞ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

### –¢–µ–∫—É—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

1. `search_kb_articles()` - –ø–æ–∏—Å–∫ –≤ KB
2. `get_article_by_id()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
3. `get_kb_statistics()` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ KB
4. `parse_article_from_url()` - –ø–∞—Ä—Å–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏–∑ —Å—Ç–∞—Ç—å–∏ ‚≠ê **–ù–û–í–û–ï**

### –ë—É–¥—É—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å):

- `validate_article_relevance()` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- `extract_metadata()` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- `generate_qa_from_article()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è Q/A –ø–∞—Ä
- `add_article_to_kb()` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ –≤ KB

---

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ FastAPI, –∫–æ—Ç–æ—Ä—ã–π –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.

**–¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
Streamlit UI ‚Üí FastAPI ‚Üí –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ (—á–µ—Ä–µ–∑ MCP):**
```
Streamlit UI ‚Üí FastAPI ‚Üí MCP Client ‚Üí KB MCP Server ‚Üí –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
```

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

–î–ª—è MVP –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ (–ø—Ä—è–º–æ–π –≤—ã–∑–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤), –Ω–æ –≤ –±—É–¥—É—â–µ–º –º–æ–∂–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –ø–æ–ª–Ω—É—é MCP –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É, –≥–¥–µ –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ KB –∏–¥—É—Ç —á–µ—Ä–µ–∑ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- `backend/app/mcp/kb_mcp_server.py` - MCP —Å–µ—Ä–≤–µ—Ä —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
- `MCP_AGENT_APPROACH.md` - –æ–ø–∏—Å–∞–Ω–∏–µ MCP –ø–æ–¥—Ö–æ–¥–∞
- `docs/URL_PARSING_GUIDE.md` - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –ø–∞—Ä—Å–∏–Ω–≥—É



