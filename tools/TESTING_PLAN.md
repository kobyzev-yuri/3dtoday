# –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ KB

## üìã –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ –£–∂–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ (–∏–∑ `test_admin_ui_functionality.py`):
- ‚úÖ JSON —Ñ–æ—Ä–º–∞—Ç (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø—Ä–∏–º–µ—Ä)
- ‚úÖ URL –æ–±—ã—á–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ (—Ç–µ—Å—Ç 3.1)
- ‚úÖ URL —á–µ—Ä–µ–∑ LLM (—Ç–µ—Å—Ç 3.2) - —á–∞—Å—Ç–∏—á–Ω–æ
- ‚ö†Ô∏è PDF —Ñ–æ—Ä–º–∞—Ç - —Ç—Ä–µ–±—É–µ—Ç —É–∫–∞–∑–∞–Ω–∏—è —Ñ–∞–π–ª–∞/URL

### üîÑ –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:

### ‚ö†Ô∏è –í–ê–ñ–ù–û: –í–∞—Ä–∏–∞–Ω—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:**

1. **Ollama (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π)** - –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
   - –ë–∞–∑–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥ –±–µ–∑ –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
   - –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–∏—Å—Ç–µ–º—É
   - –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

2. **Gemini (—Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏)** - –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø –¥–ª—è —Å—Ç–∞—Ç–µ–π —Å –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏
   - –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ Gemini Vision API
   - –°–æ–∑–¥–∞–Ω–∏–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ KB

3. **OpenAI** - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
   - –ü–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ GPT-4o
   - –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∞–Ω–∞–ª–∏–∑–∞

**–î–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Gemini Vision API
- ‚úÖ –ê–±—Å—Ç—Ä–∞–∫—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ KB –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- ‚úÖ –ù–µ –∑–∞–º—É—Å–æ—Ä–∏–≤–∞–µ–º KB –Ω–µ—Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

## üéØ –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏

### –ú–µ—Ç–æ–¥ 1: –ü–æ URL —á–µ—Ä–µ–∑ LLM (GPT-4o/Gemini) ‚≠ê –ü–†–ò–û–†–ò–¢–ï–¢

**Endpoint:** `/api/kb/articles/parse_with_llm`

**–¢–µ—Å—Ç–æ–≤—ã–µ URL (–∏–∑ `image_urls.json`):**

1. **Simplify3D Stringing** (–ª—É—á—à–∏–π –ø—Ä–∏–º–µ—Ä —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏):
   ```
   URL: https://www.simplify3d.com/resources/print-quality-troubleshooting/stringing-or-oozing/
   –ü—Ä–æ–≤–∞–π–¥–µ—Ä: Gemini
   –ú–æ–¥–µ–ª—å: gemini-3-pro-preview
   ```
   **–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
   - –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç–∞—Ç—å–∏
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 3-5 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
   - –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ Vision Analyzer
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (problem_type=stringing)
   - –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å (relevance_score > 0.7)

2. **All3DP Warping**:
   ```
   URL: https://all3dp.com/2/3d-printing-warping-how-to-fix-it/
   –ü—Ä–æ–≤–∞–π–¥–µ—Ä: Gemini
   –ú–æ–¥–µ–ª—å: gemini-3-pro-preview
   ```
   **–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
   - –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç–∞—Ç—å–∏
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (problem_type=warping)
   - –†–µ—à–µ–Ω–∏—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

3. **Prusa Knowledge Base**:
   ```
   URL: https://help.prusa3d.com/article/layer-separation-and-splitting_1258
   –ü—Ä–æ–≤–∞–π–¥–µ—Ä: Gemini –∏–ª–∏ OpenAI
   ```
   **–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
   - –ü–∞—Ä—Å–∏–Ω–≥ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
   - –ö–∞—á–µ—Å—Ç–≤–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

**–ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
```bash
# –ß–µ—Ä–µ–∑ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É LLM –ø–∞—Ä—Å–∏–Ω–≥–∞)
python tools/test_admin_ui_functionality.py --url "https://www.simplify3d.com/resources/print-quality-troubleshooting/stringing-or-oozing/"

# –ò–ª–∏ —á–µ—Ä–µ–∑ curl
curl -X POST "http://localhost:8000/api/kb/articles/parse_with_llm" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://www.simplify3d.com/resources/print-quality-troubleshooting/stringing-or-oozing/",
    "llm_provider": "gemini",
    "model": "gemini-3-pro-preview"
  }'
```

---

### –ú–µ—Ç–æ–¥ 2: –ü–æ URL/–§–∞–π–ª—É (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥)

**Endpoint:** `/api/kb/articles/parse`

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏:**

1. **URL HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã**:
   ```
   URL: https://www.simplify3d.com/resources/print-quality-troubleshooting/warping/
   source_type: url
   ```
   **–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
   - –ü–∞—Ä—Å–∏–Ω–≥ HTML
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

2. **–õ–æ–∫–∞–ª—å–Ω—ã–π HTML —Ñ–∞–π–ª** (–µ—Å–ª–∏ –µ—Å—Ç—å):
   ```
   source: path/to/article.html
   source_type: html
   ```

3. **–õ–æ–∫–∞–ª—å–Ω—ã–π TXT —Ñ–∞–π–ª**:
   ```
   source: path/to/article.txt
   source_type: txt
   ```
   **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª:**
   ```bash
   cat > tools/test_data/test_article.txt << 'EOF'
   –ó–∞–≥–æ–ª–æ–≤–æ–∫: –ö–∞–∫ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å stringing
   
   Stringing - —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –∫–æ–≥–¥–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–∏—Ç–æ—á–∫–∏ –º–µ–∂–¥—É –¥–µ—Ç–∞–ª—è–º–∏.
   
   –†–µ—à–µ–Ω–∏—è:
   1. –£–≤–µ–ª–∏—á—å—Ç–µ retraction –¥–æ 6 –º–º
   2. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å–æ–ø–ª–∞: 200¬∞C
   3. –°–∫–æ—Ä–æ—Å—Ç—å retraction: 45 –º–º/—Å
   EOF
   ```

4. **–õ–æ–∫–∞–ª—å–Ω—ã–π MD —Ñ–∞–π–ª**:
   ```
   source: path/to/article.md
   source_type: md
   ```
   **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª:**
   ```bash
   cat > tools/test_data/test_article.md << 'EOF'
   # –ö–∞–∫ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å stringing
   
   Stringing - —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –∫–æ–≥–¥–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–∏—Ç–æ—á–∫–∏ –º–µ–∂–¥—É –¥–µ—Ç–∞–ª—è–º–∏.
   
   ## –†–µ—à–µ–Ω–∏—è
   
   1. –£–≤–µ–ª–∏—á—å—Ç–µ retraction –¥–æ 6 –º–º
   2. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å–æ–ø–ª–∞: 200¬∞C
   3. –°–∫–æ—Ä–æ—Å—Ç—å retraction: 45 –º–º/—Å
   EOF
   ```

5. **PDF —Ñ–∞–π–ª** (–µ—Å–ª–∏ –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–π):
   ```
   source: path/to/article.pdf –∏–ª–∏ URL PDF
   source_type: pdf
   max_pages: 10
   ```
   **–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
   - –ü–∞—Ä—Å–∏–Ω–≥ PDF
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ PDF
   - –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ Vision Analyzer

**–ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
```bash
# URL
python tools/test_admin_ui_functionality.py --url "https://www.simplify3d.com/resources/print-quality-troubleshooting/warping/"

# –§–∞–π–ª—ã (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É)
# –ß–µ—Ä–µ–∑ curl –¥–ª—è —Ñ–∞–π–ª–∞
curl -X POST "http://localhost:8000/api/kb/articles/parse" \
  -F "source=@tools/test_data/test_article.txt" \
  -F "source_type=txt"
```

---

### –ú–µ—Ç–æ–¥ 3: –†—É—á–Ω–æ–π –≤–≤–æ–¥

**Endpoint:** `/api/kb/articles/add`

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏:**

1. **–ü—Ä–æ—Å—Ç–∞—è —Å—Ç–∞—Ç—å—è –ø—Ä–æ stringing**:
   ```json
   {
     "title": "–ö–∞–∫ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å stringing –ø—Ä–∏ –ø–µ—á–∞—Ç–∏ PLA",
     "content": "Stringing (—Å–æ–ø–ª–∏) - —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞, –∫–æ–≥–¥–∞ –º–µ–∂–¥—É –¥–µ—Ç–∞–ª—è–º–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Ç–æ–Ω–∫–∏–µ –Ω–∏—Ç–æ—á–∫–∏ –ø–ª–∞—Å—Ç–∏–∫–∞.\n\n–ü—Ä–∏—á–∏–Ω—ã:\n- –°–ª–∏—à–∫–æ–º –≤—ã—Å–æ–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å–æ–ø–ª–∞\n- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è retraction\n\n–†–µ—à–µ–Ω–∏—è:\n1. –£–º–µ–Ω—å—à–∏—Ç–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É —Å–æ–ø–ª–∞ –Ω–∞ 5-10¬∞C\n2. –£–≤–µ–ª–∏—á—å—Ç–µ retraction –¥–æ 6-8 –º–º\n3. –£–≤–µ–ª–∏—á—å—Ç–µ —Å–∫–æ—Ä–æ—Å—Ç—å retraction –¥–æ 45-60 –º–º/—Å",
     "url": "https://3dtoday.ru/blogs/test/stringing-pla",
     "section": "–¢–µ—Ö–Ω–∏—á–∫–∞"
   }
   ```

2. **–°—Ç–∞—Ç—å—è –ø—Ä–æ warping**:
   ```json
   {
     "title": "Warping –ø—Ä–∏ –ø–µ—á–∞—Ç–∏ PETG: –ø—Ä–∏—á–∏–Ω—ã –∏ —Ä–µ—à–µ–Ω–∏—è",
     "content": "Warping (–¥–µ—Ñ–æ—Ä–º–∞—Ü–∏—è) - —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –∫–æ–≥–¥–∞ —É–≥–ª—ã –¥–µ—Ç–∞–ª–∏ –æ—Ç–≥–∏–±–∞—é—Ç—Å—è –æ—Ç —Å—Ç–æ–ª–∞.\n\n–ü—Ä–∏—á–∏–Ω—ã:\n- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å—Ç–æ–ª–∞\n- –†–µ–∑–∫–æ–µ –æ—Ö–ª–∞–∂–¥–µ–Ω–∏–µ\n- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞–¥–≥–µ–∑–∏—è\n\n–†–µ—à–µ–Ω–∏—è:\n1. –£–≤–µ–ª–∏—á—å—Ç–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É —Å—Ç–æ–ª–∞ –¥–æ 80¬∞C –¥–ª—è PETG\n2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ brim –∏–ª–∏ raft\n3. –ó–∞–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–Ω—Ç–µ—Ä –≤ enclosure",
     "url": "",
     "section": "–¢–µ—Ö–Ω–∏—á–∫–∞"
   }
   ```

**–ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
```bash
# –ß–µ—Ä–µ–∑ curl
curl -X POST "http://localhost:8000/api/kb/articles/add" \
  -H "Content-Type: application/json" \
  -d @tools/test_data/sample_article.json

# –ò–ª–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
streamlit run frontend/admin_ui.py
# –í—ã–±—Ä–∞—Ç—å –º–µ—Ç–æ–¥ "–†—É—á–Ω–æ–π –≤–≤–æ–¥"
```

---

### –ú–µ—Ç–æ–¥ 4: –ò–º–ø–æ—Ä—Ç –∏–∑ JSON

**Endpoint:** `/api/kb/articles/add` (—Ç–æ—Ç –∂–µ, —á—Ç–æ –∏ —Ä—É—á–Ω–æ–π –≤–≤–æ–¥)

**–¢–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏:**

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π sample_article.json**:
   ```bash
   curl -X POST "http://localhost:8000/api/kb/articles/add" \
     -H "Content-Type: application/json" \
     -d @tools/test_data/sample_article.json
   ```

2. **–°–æ–∑–¥–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π JSON —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏**:
   ```json
   {
     "title": "–ö–∞–∫ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å stringing",
     "content": "...",
     "url": "https://3dtoday.ru/...",
     "section": "–¢–µ—Ö–Ω–∏—á–∫–∞",
     "metadata": {
       "problem_type": "stringing",
       "printer_models": ["Ender-3"],
       "materials": ["PLA"],
       "solutions": [
         {
           "parameter": "retraction_length",
           "value": 6,
           "unit": "mm"
         }
       ]
     }
   }
   ```

**–ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
```bash
# –ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
streamlit run frontend/admin_ui.py
# –í—ã–±—Ä–∞—Ç—å –º–µ—Ç–æ–¥ "–ò–º–ø–æ—Ä—Ç –∏–∑ JSON"
# –ó–∞–≥—Ä—É–∑–∏—Ç—å tools/test_data/sample_article.json
```

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ü–†–Ø–ú–û –°–ï–ô–ß–ê–°

### ‚ö†Ô∏è –í–ê–ñ–ù–û: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç—Ä–µ—Ö —Ñ–∞–∑

**–ü—Ä–æ—Ü–µ—Å—Å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–µ–π —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä–µ—Ö —Ñ–∞–∑:**
1. **–ü–∞—Ä—Å–∏–Ω–≥** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏–∑ URL/—Ñ–∞–π–ª–∞
2. **–ê–Ω–∞–ª–∏–∑ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ä—è (relevance_score, is_relevant)
3. **–†–∞–∑–º–µ—â–µ–Ω–∏–µ –≤ KB** - –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –≤ Qdrant

**–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
```bash
# –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç –≤—Å–µ—Ö —Ç—Ä–µ—Ö —Ñ–∞–∑ –¥–ª—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π —Å—Ç–∞—Ç—å–∏
python tools/test_full_workflow.py --url "https://www.simplify3d.com/resources/print-quality-troubleshooting/stringing-or-oozing/"

# –¢–æ–ª—å–∫–æ –ø–∞—Ä—Å–∏–Ω–≥ (–±–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ KB)
python tools/test_full_workflow.py --url "..." --skip-add

# –¢–µ—Å—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π —Å—Ç–∞—Ç—å–∏
python tools/test_full_workflow.py --rejection-only

# –¢–µ—Å—Ç —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ (–ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª)
python tools/test_full_workflow.py --manual-only
```

### –®–∞–≥ 1: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å URL —á–µ—Ä–µ–∑ LLM (—Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π) ‚≠ê

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –∑–∞–ø—É—â–µ–Ω
curl http://localhost:8000/health

# –¢–µ—Å—Ç 1: Simplify3D Stringing (–ª—É—á—à–∏–π –ø—Ä–∏–º–µ—Ä) - –ü–û–õ–ù–´–ô –¶–ò–ö–õ
python tools/test_full_workflow.py --url "https://www.simplify3d.com/resources/print-quality-troubleshooting/stringing-or-oozing/" --method llm --provider gemini

# –ò–ª–∏ —á–µ—Ä–µ–∑ curl (—Ç–æ–ª—å–∫–æ –ø–∞—Ä—Å–∏–Ω–≥):
curl -X POST "http://localhost:8000/api/kb/articles/parse_with_llm" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://www.simplify3d.com/resources/print-quality-troubleshooting/stringing-or-oozing/",
    "llm_provider": "gemini",
    "model": "gemini-3-pro-preview"
  }' | jq '.'
```

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- ‚úÖ –§–ê–ó–ê 1: –°—Ç–∞—Ç—å—è —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–∞
- ‚úÖ –§–ê–ó–ê 1: –ò–∑–≤–ª–µ—á–µ–Ω—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (3-5 —à—Ç—É–∫)
- ‚úÖ –§–ê–ó–ê 2: –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏–∑–≤–ª–µ—á–µ–Ω—ã (problem_type=stringing)
- ‚úÖ –§–ê–ó–ê 2: –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å > 0.7
- ‚úÖ –§–ê–ó–ê 2: is_relevant = True
- ‚úÖ –§–ê–ó–ê 3: –°—Ç–∞—Ç—å—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ KB (article_id –ø–æ–ª—É—á–µ–Ω)

**–ó–∞—Ç–µ–º –¥–æ–±–∞–≤–∏—Ç—å –≤ KB:**
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç parse_with_llm –≤ add_from_parse
# –ò–ª–∏ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```

### –®–∞–≥ 2: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ URL

```bash
curl -X POST "http://localhost:8000/api/kb/articles/parse" \
  -H "Content-Type: application/json" \
  -d '{
    "source": "https://all3dp.com/2/3d-printing-warping-how-to-fix-it/",
    "source_type": "url",
    "llm_provider": "ollama"
  }' | jq '.'
```

### –®–∞–≥ 3: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä—É—á–Ω–æ–π –≤–≤–æ–¥

```bash
curl -X POST "http://localhost:8000/api/kb/articles/add" \
  -H "Content-Type: application/json" \
  -d @tools/test_data/sample_article.json | jq '.'
```

### –®–∞–≥ 4: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã (TXT, MD)

**–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
```bash
# TXT —Ñ–∞–π–ª
cat > tools/test_data/test_stringing.txt << 'EOF'
–ó–∞–≥–æ–ª–æ–≤–æ–∫: –ö–∞–∫ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å stringing

Stringing (—Å–æ–ø–ª–∏) - —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –∫–æ–≥–¥–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–∏—Ç–æ—á–∫–∏ –º–µ–∂–¥—É –¥–µ—Ç–∞–ª—è–º–∏.

–†–µ—à–µ–Ω–∏—è:
1. –£–≤–µ–ª–∏—á—å—Ç–µ retraction –¥–æ 6 –º–º
2. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å–æ–ø–ª–∞: 200¬∞C
3. –°–∫–æ—Ä–æ—Å—Ç—å retraction: 45 –º–º/—Å
EOF

# MD —Ñ–∞–π–ª
cat > tools/test_data/test_warping.md << 'EOF'
# Warping –ø—Ä–∏ –ø–µ—á–∞—Ç–∏ PETG

Warping - —ç—Ç–æ –¥–µ—Ñ–æ—Ä–º–∞—Ü–∏—è —É–≥–ª–æ–≤ –¥–µ—Ç–∞–ª–∏.

## –†–µ—à–µ–Ω–∏—è

1. –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å—Ç–æ–ª–∞: 80¬∞C
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ brim
3. –ó–∞–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–Ω—Ç–µ—Ä
EOF
```

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
```bash
streamlit run frontend/admin_ui.py
# –í—ã–±—Ä–∞—Ç—å –º–µ—Ç–æ–¥ "–ü–æ URL/–§–∞–π–ª—É"
# –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã
```

---

## üìä –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –î–ª—è –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –í–°–ï –¢–†–ò –§–ê–ó–´:

#### –§–ê–ó–ê 1: –ü–ê–†–°–ò–ù–ì
- [ ] **–ü–∞—Ä—Å–∏–Ω–≥ —Ä–∞–±–æ—Ç–∞–µ—Ç** - —Å—Ç–∞—Ç—å—è/—Ñ–∞–π–ª —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω
- [ ] **–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏–∑–≤–ª–µ—á–µ–Ω** - title –Ω–µ –ø—É—Å—Ç–æ–π
- [ ] **–ö–æ–Ω—Ç–µ–Ω—Ç –∏–∑–≤–ª–µ—á–µ–Ω** - content —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—Å—Ç
- [ ] **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑–≤–ª–µ—á–µ–Ω—ã** (–µ—Å–ª–∏ –µ—Å—Ç—å) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, –∫–∞—á–µ—Å—Ç–≤–æ
- [ ] **URL —Å–æ—Ö—Ä–∞–Ω–µ–Ω** - url –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ parsed_document

#### –§–ê–ó–ê 2: –ê–ù–ê–õ–ò–ó –†–ï–õ–ï–í–ê–ù–¢–ù–û–°–¢–ò
- [ ] **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏–∑–≤–ª–µ—á–µ–Ω—ã** - problem_type, materials, printer_models
- [ ] **–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞** - relevance_score —Ä–∞—Å—Å—á–∏—Ç–∞–Ω
- [ ] **–ü–æ—Ä–æ–≥–∏ —Å–æ–±–ª—é–¥–µ–Ω—ã** - relevance_score >= 0.7 (–¥–ª—è –æ–¥–æ–±—Ä–µ–Ω–∏—è)
- [ ] **is_relevant = True** - –¥–ª—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π
- [ ] **decision –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π** - "approve" –¥–ª—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö, "reject" –¥–ª—è –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö
- [ ] **–ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** (–µ—Å–ª–∏ –µ—Å—Ç—å) - Vision Analyzer —Ä–∞–±–æ—Ç–∞–µ—Ç

#### –§–ê–ó–ê 3: –†–ê–ó–ú–ï–©–ï–ù–ò–ï –í KB
- [ ] **–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç** - —Å—Ç–∞—Ç—å—è –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ Qdrant
- [ ] **article_id –ø–æ–ª—É—á–µ–Ω** - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–æ–∑–¥–∞–Ω
- [ ] **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã** - problem_type, materials –≤ –±–∞–∑–µ
- [ ] **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã** (–µ—Å–ª–∏ –µ—Å—Ç—å) - –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ kb_3dtoday_images
- [ ] **–ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç** - —Å—Ç–∞—Ç—å—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —á–µ—Ä–µ–∑ RAG –ø–æ–∏—Å–∫

### –¢–µ—Å—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π:

- [ ] **–ù–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞—è —Å—Ç–∞—Ç—å—è –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞** - HTTP 400 –∏–ª–∏ relevance_score < 0.6
- [ ] **–ü—Ä–∏—á–∏–Ω–∞ —É–∫–∞–∑–∞–Ω–∞** - –æ—à–∏–±–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- [ ] **is_relevant = False** - –¥–ª—è –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π
- [ ] **decision = "reject"** - –¥–ª—è –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **PDF –ø–∞—Ä—Å–∏–Ω–≥** - –º–æ–∂–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
2. **LLM –ø–∞—Ä—Å–∏–Ω–≥** - —Ç—Ä–µ–±—É–µ—Ç API –∫–ª—é—á–∏ (GEMINI_API_KEY –∏–ª–∏ OPENAI_API_KEY)
3. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** - –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã, –µ—Å–ª–∏ —Å–∞–π—Ç –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–∞—Ä—Å–∏–Ω–≥
4. **–¢–∞–π–º–∞—É—Ç—ã** - –¥–ª–∏–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –º–æ–≥—É—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Ç–∞–π–º–∞—É—Ç–∞

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–∞—á–Ω–∏—Ç–µ —Å Simplify3D —Å—Ç–∞—Ç–µ–π** - –æ–Ω–∏ —Å–∞–º—ã–µ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏ –Ω–∞–¥–µ–∂–Ω—ã–µ
2. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –≤–∏–∑—É–∞–ª—å–Ω–æ –ø—Ä–æ—â–µ —É–≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
3. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ** - –æ–Ω–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã –¥–ª—è –ø–æ–∏—Å–∫–∞
4. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** - –æ–Ω–∏ —É–ª—É—á—à–∞—é—Ç –∫–∞—á–µ—Å—Ç–≤–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
5. **–í–µ–¥–∏—Ç–µ –∂—É—Ä–Ω–∞–ª** - –∑–∞–ø–∏—Å—ã–≤–∞–π—Ç–µ, —á—Ç–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏ –∫–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞–π–¥–µ–Ω—ã

---

## üìù –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ API –∑–∞–ø—É—â–µ–Ω
curl http://localhost:8000/health

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
python tools/test_admin_ui_functionality.py --url "https://www.simplify3d.com/resources/print-quality-troubleshooting/stringing-or-oozing/"

# 3. –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
streamlit run frontend/admin_ui.py

# 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –º–µ—Ç–æ–¥—ã —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```


