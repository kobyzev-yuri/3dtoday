# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ª–æ–≥–∏–∫–∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π

**–î–∞—Ç–∞:** 2025-12-09  
**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** –õ–æ–≥–∏–∫–∞ `_make_decision` –∏ –≤–æ–∑–≤—Ä–∞—Ç `is_relevant` –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ `_make_decision` (—Å—Ç—Ä–æ–∫–∞ 510)

**–ë–´–õ–û:**
```python
if relevance_score >= 0.7 and quality_score >= 0.7 and not is_duplicate:
    return {"decision": "approve", ...}
```

**–°–¢–ê–õ–û:**
```python
if relevance_score >= 0.7 and quality_score >= 0.7 and is_relevant and has_valuable_info and not is_duplicate:
    return {"decision": "approve", ...}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç `is_relevant` –∏ `has_valuable_info`.

---

### 2. –î–æ–±–∞–≤–ª–µ–Ω –≤–æ–∑–≤—Ä–∞—Ç `is_relevant` –∏ `has_valuable_info` –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ

**–ë–´–õ–û:**
```python
return {
    "decision": decision["decision"],
    "reason": decision["reason"],
    "relevance_score": relevance_check.get("score", 0.0),
    "quality_score": relevance_check.get("quality_score", 0.0),
    ...
}
```

**–°–¢–ê–õ–û:**
```python
return {
    "decision": decision["decision"],
    "reason": decision["reason"],
    "relevance_score": relevance_check.get("score", 0.0),
    "quality_score": relevance_check.get("quality_score", 0.0),
    "is_relevant": relevance_check.get("is_relevant", False),
    "has_valuable_info": relevance_check.get("has_valuable_info", False),
    ...
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–µ–ø–µ—Ä—å `is_relevant` –∏ `has_valuable_info` –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∞–Ω–∞–ª–∏–∑–∞.

---

### 3. –£–ª—É—á—à–µ–Ω –ø—Ä–æ–º–ø—Ç –¥–ª—è Gemini3

**–î–û–ë–ê–í–õ–ï–ù–û:**
```
–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û - –°–û–û–¢–í–ï–¢–°–¢–í–ò–ï score –∏ is_relevant:
- –ï—Å–ª–∏ score >= 0.7, —Ç–æ is_relevant –î–û–õ–ñ–ï–ù –±—ã—Ç—å true
- –ï—Å–ª–∏ score < 0.6, —Ç–æ is_relevant –î–û–õ–ñ–ï–ù –±—ã—Ç—å false
- –ï—Å–ª–∏ 0.6 <= score < 0.7, —Ç–æ is_relevant –º–æ–∂–µ—Ç –±—ã—Ç—å true –∏–ª–∏ false –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –ù–ï –î–û–ü–£–°–ö–ê–ô –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π: –µ—Å–ª–∏ score –≤—ã—Å–æ–∫–∏–π (>= 0.7), –Ω–æ is_relevant=false - —ç—Ç–æ –û–®–ò–ë–ö–ê
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Gemini3 —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç —è–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ `score` –∏ `is_relevant`.

---

### 4. –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π

**–î–û–ë–ê–í–õ–ï–ù–û:**
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π –º–µ–∂–¥—É score –∏ is_relevant
score = json_data.get("score", 0.0)
is_relevant = json_data.get("is_relevant", False)

# –ï—Å–ª–∏ score >= 0.7, –Ω–æ is_relevant=False - –∏—Å–ø—Ä–∞–≤–ª—è–µ–º
if score >= 0.7 and not is_relevant:
    logger.warning(f"‚ö†Ô∏è –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ: score={score:.2f} >= 0.7, –Ω–æ is_relevant=False. –ò—Å–ø—Ä–∞–≤–ª—è—é –Ω–∞ True.")
    json_data["is_relevant"] = True

# –ï—Å–ª–∏ score < 0.6, –Ω–æ is_relevant=True - –∏—Å–ø—Ä–∞–≤–ª—è–µ–º
if score < 0.6 and is_relevant:
    logger.warning(f"‚ö†Ô∏è –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–µ: score={score:.2f} < 0.6, –Ω–æ is_relevant=True. –ò—Å–ø—Ä–∞–≤–ª—è—é –Ω–∞ False.")
    json_data["is_relevant"] = False
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π –º–µ–∂–¥—É `score` –∏ `is_relevant`.

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–≤–µ—Ä–∫–∏

### –¢–µ—Å—Ç 1: PDF —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ `is_relevant: ‚úÖ –î–∞` (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ!)
- ‚úÖ `has_valuable_info: ‚úÖ –î–∞` (–¥–æ—Å—Ç—É–ø–Ω–æ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ)
- ‚úÖ `relevance_score: 0.90` (–≤—ã—Å–æ–∫–∞—è)
- ‚úÖ `quality_score: 0.85` (–≤—ã—Å–æ–∫–∞—è)
- ‚úÖ `–î—É–±–ª–∏–∫–∞—Ç: ‚ùå –î–∞` (–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω)
- ‚úÖ `–†–µ—à–µ–Ω–∏–µ: reject` (–ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Ç.–∫. –¥—É–±–ª–∏–∫–∞—Ç)

**–í—ã–≤–æ–¥:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. `is_relevant` —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ.

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–æ –∏ –ø–æ—Å–ª–µ

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
|----------|----------------|-------------------|
| `is_relevant` –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ | ‚ùå –ù–µ –≤–æ–∑–≤—Ä–∞—â–∞–ª—Å—è | ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è |
| `has_valuable_info` –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ | ‚ùå –ù–µ –≤–æ–∑–≤—Ä–∞—â–∞–ª—Å—è | ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ `is_relevant` –ø—Ä–∏ approve | ‚ùå –ù–µ –ø—Ä–æ–≤–µ—Ä—è–ª–∞—Å—å | ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ `has_valuable_info` –ø—Ä–∏ approve | ‚ùå –ù–µ –ø—Ä–æ–≤–µ—Ä—è–ª–∞—Å—å | ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è |
| –ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è score/is_relevant | ‚ùå –ù–µ –∏—Å–ø—Ä–∞–≤–ª—è–ª–∏—Å—å | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø—Ä–∞–≤–ª—è—é—Ç—Å—è |
| –ü—Ä–æ–º–ø—Ç –¥–ª—è Gemini3 | ‚ö†Ô∏è –ù–µ—è–≤–Ω—ã–π | ‚úÖ –Ø–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ |

---

## üéØ –í—ã–≤–æ–¥—ã

1. ‚úÖ **–õ–æ–≥–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞:** –¢–µ–ø–µ—Ä—å `_make_decision` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `is_relevant` –∏ `has_valuable_info` –ø—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏
2. ‚úÖ **–î–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã:** `is_relevant` –∏ `has_valuable_info` —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∞–Ω–∞–ª–∏–∑–∞
3. ‚úÖ **–ü—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—è –∏—Å–ø—Ä–∞–≤–ª—è—é—Ç—Å—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π –º–µ–∂–¥—É `score` –∏ `is_relevant`
4. ‚úÖ **–ü—Ä–æ–º–ø—Ç —É–ª—É—á—à–µ–Ω:** Gemini3 –ø–æ–ª—É—á–∞–µ—Ç —è–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ `score` –∏ `is_relevant`

**–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!** üéâ


